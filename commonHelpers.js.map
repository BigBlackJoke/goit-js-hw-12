{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const renderFunctions = (data, gallery) => {\n    const makingGallery = data.hits.map((hit => {\n        return `<li>\n          <a href=\"${hit.largeImageURL}\"><img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\"/></a>\n          <div class=\"imageInfo\">\n            <div class=\"imageEachInfo\">\n                <span name=\"likes\">Likes</span>\n                <span name=\"likes-num\">${hit.likes}</span>\n            </div>\n            <div class=\"imageEachInfo\">\n                <span name=\"views\">Views</span>\n                <span name=\"views-num\">${hit.views}</span>\n            </div>\n            <div class=\"imageEachInfo\">\n                <span name=\"comments\">Comments</span>\n                <span name=\"comments-num\">${hit.comments}</span>\n            </div>\n            <div class=\"imageEachInfo\">\n                <span name=\"downloads\">Downloads</span>\n                <span name=\"downloads-num\">${hit.downloads}</span>\n            </div>\n          </div>\n        </li>`\n    }));\n    gallery.insertAdjacentHTML('beforeend', makingGallery.join(''));\n};\n\n","import axios from 'axios';\n\nexport const pixabayApi = async (usersRequest, page = 1) => {\n    try {\n        const response = await axios.get(`https://pixabay.com/api/`, {\n            params: {\n                key: \"44096290-4b282435e4320beb633e0ff8a\",\n                q: usersRequest,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: \"true\",\n                per_page: 15,\n                page: page\n            }\n        });\n        return response.data;\n    } catch (error) {\n        console.log(error);\n    }\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { renderFunctions } from './js/render-functions';\nimport { pixabayApi } from './js/pixabay-api';\n\n\nconst form = document.querySelector(\".form\");\nconst input = document.querySelector(\".searching-input\");\nconst gallery = document.querySelector(\".gallery-elements\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreButton = document.querySelector(\".next-page-button\");\n\nloadMoreButton.style.display = 'none';\nloader.style.display = 'none';\n\nlet page = 1;\nlet search = '';\n\nlet lightbox = new SimpleLightbox('.gallery a', { captions: true, captionsData: 'alt', captionPosition: 'bottom', captionDelay: 250 });\n\nform.addEventListener(\"submit\", async event => {\n    event.preventDefault();\n    gallery.innerHTML = '';\n    page = 1;\n    search = input.value;\n    loadMoreButton.style.display = 'none';\n\n    if (search != \"\") {\n\n        loader.style.display = 'block';\n            try {\n                const data = await pixabayApi(search, page);\n\n                if (data.hits.length === 0) {\n                    iziToast.show({\n                        message: 'Sorry, there are no images matching your search query. Please, try again!',\n                        messageColor: 'rgba(250, 250, 251, 1)',\n                        messageSize: '16px',\n                        messageLineHeight: '24px',\n                        backgroundColor: 'rgba(181, 27, 27, 1)',\n                        position: 'topRight',\n                        maxWidth: '432px',\n                        timeout: 2000\n                    });\n                } else {\n                    renderFunctions(data, gallery);\n                    lightbox.refresh();\n                    page += 1;\n                    if (data.totalHits > 15) {\n                        loadMoreButton.style.display = 'block';\n                    }\n                }\n            } catch (error) {\n                console.log(error);\n            } finally {\n                loader.style.display = 'none';\n                event.target.reset();\n            }\n\n    } else {\n        iziToast.warning({\n            message: 'Searching input cannot be empty! Please fill the input to start searching.',\n            messageColor: 'rgba(255, 255, 255, 1)',\n            messageSize: '16px',\n            messageLineHeight: '24px',\n            backgroundColor: 'rgba(181, 27, 27, 1)',\n            position: 'topRight',\n            maxWidth: '432px',\n            timeout: 2000\n        });\n    }\n});\n\nloadMoreButton.addEventListener(\"click\", async () => {\n    loader.style.display = 'block';\n    loadMoreButton.style.display = 'none';\n        try {\n            const data = await pixabayApi(search, page);\n            renderFunctions(data, gallery);\n            lightbox.refresh();\n            if (data.hits.length > 0) {\n                const eachImage = document.querySelector('.gallery-elements li');\n                const imageHeight = eachImage.getBoundingClientRect().height;\n                window.scrollBy({\n                top: imageHeight * 2,\n                behavior: 'smooth'\n            });\n                loadMoreButton.style.display = 'block';\n                page += 1;\n            }\n            const totalPages = Math.ceil(data.totalHits / 15);\n            if (page === totalPages) {\n                loadMoreButton.style.display = 'none';\n                iziToast.show({\n                message: 'We are sorry, but you have reached the end of search results.',\n                messageColor: 'rgba(255, 255, 255, 1)',\n                messageSize: '16px',\n                messageLineHeight: '24px',\n                backgroundColor: 'rgba(78, 117, 255, 1)',\n                position: 'topRight',\n                maxWidth: '432px',\n                timeout: 3000\n            });\n            }\n        } catch (error) {\n            console.log(error);\n        } finally {\n        loader.style.display = 'none';\n    }\n});"],"names":["renderFunctions","data","gallery","makingGallery","hit","pixabayApi","usersRequest","page","axios","error","form","input","loader","loadMoreButton","search","lightbox","SimpleLightbox","event","iziToast","imageHeight","totalPages"],"mappings":"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"}